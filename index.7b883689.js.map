{"mappings":"AAEA,MAAMA,EAAcC,SAASC,cAAc,eACrCC,EAAOF,SAASC,cAAc,SAC9BE,EAAcH,SAASC,cAAc,gBACrCG,EAAkBJ,SAASC,cAAc,0BAE/CE,EAAYE,YAAc,YAC1B,MAAMC,EAAe,ICNN,MAWbC,kBACE,MAAMC,EAAM,IAAIC,KACVC,EAAY,IAAID,KAAKD,GAC3BE,EAAUC,QAAQH,EAAII,UAAY,GAElC,MAAMC,EAAqBH,EAAUI,cAAcC,MAAM,EAAG,IACtDC,EAAiBR,EAAIM,cAAcC,MAAM,EAAG,IAE5CE,EAAS,IAAIC,gBAAgB,CACjCC,KAAMN,EACNO,GAAIJ,EACJK,OAAQ,aACRC,SAAUC,KAAKD,SACfE,EAAGD,KAAKE,MACRC,KAAMH,KAAKG,OAGPC,EAAM,GAAGJ,KAAKK,YAAYX,EAAOY,aAEjCC,EAAU,CACd,YAAaP,KAAKQ,QAGdC,QAAiBC,MAAMN,EAAK,C,QAAEG,IAEpC,IAAKE,EAASE,GACZ,MAAM,IAAIC,MAAM,UAGlB,MAAMC,QAAqBJ,EAASK,OAEpC,OADAd,KAAKG,MAAQ,EACNU,C,CAGLE,kBACF,OAAOf,KAAKE,K,CAGVa,gBAAYC,GACdhB,KAAKE,MAAQc,C,CAGfC,YACEjB,KAAKG,KAAO,C,CArDde,cACElB,KAAKE,MAAQ,GACbF,KAAKG,KAAO,EACZH,KAAKK,SAAW,oCAChBL,KAAKQ,OAAS,mCACdR,KAAKmB,QAAU,KACfnB,KAAKoB,SAAW,UAChBpB,KAAKD,SAAW,E,GDKpB,SAASsB,EAAWC,GAClB,OAAOA,EACJC,KAAI,EAACC,MAAEA,EAAKC,OAAEA,EAAMC,YAAEA,EAAWC,WAAEA,EAAUC,YAAEA,EAAWxB,IAAEA,KACpD,sGAIMuB,wBACAH,0GAIgBA,4CACAC,8DAuEnC,SAAiBI,GACf,MACMC,EAAO,IAAI5C,KADE2C,GAIbE,EAAOD,EAAKE,cACZC,GAAS,KAAOH,EAAKI,WAAa,IAAI1C,OAAM,GAC5C2C,GAAO,IAAML,EAAKzC,WAAWG,OAAM,GACnC4C,GAAS,IAAMN,EAAKO,YAAY7C,OAAM,GACtC8C,GAAW,IAAMR,EAAKS,cAAc/C,OAAM,GAKhD,MAFsB,GAAGuC,KAAQE,KAASE,KAAOC,KAASE,G,CAlFNE,CAAQd,iDACtBE,0CAEpBxB,oHAQfqC,KAAK,G,CAsBVzD,eAAe0D,IACb,IACE9D,EAAY+D,UAAW,EAEvB,MAAMC,QAAa7D,EAAa8D,aAE1BC,SAAEA,EAAQC,aAAEA,GAAiBH,EAKnC,GAHIG,EAAeD,EAASE,SAC1BnE,EAAgBoE,QAAS,IAEtBF,EAIH,MAHAlE,EAAgBoE,QAAS,EAEzBC,MAAM,wBACA,IAAItC,MAAM,eAGlB/B,EAAgBsE,SAAU,EAC1BtE,EAAgBC,YAAc,aAE9BN,EAAY4E,mBAAmB,YAAa/B,EAAWyB,IAEvDjE,EAAgBsE,SAAU,EAC1BtE,EAAgBC,YAAc,YAC9BF,EAAY+D,UAAW,C,CACvB,MAAOU,GACPxE,EAAgBoE,QAAS,EACzBK,QAAQD,MAAMA,GACdzE,EAAY+D,UAAW,C,EAjF3BhE,EAAK4E,iBAAiB,UAiCtB,SAA2BC,GACzBA,EAAEC,iBAEF,MAAMC,EAAkBF,EAAEG,cAAcC,SAAS1D,MAAM2D,MAAMC,OAE7D,IAAKJ,EAEH,YADAR,MAAM,gBAIRnE,EAAagC,YAAc2C,EAC3B3E,EAAakC,YA0CbzC,EAAYuF,UAAY,GAvCxBlF,EAAgBoE,QAAS,EAEzBP,G,IAhDF7D,EAAgB0E,iBAAiB,QAASb,GAE1C7D,EAAgBoE,QAAS","sources":["src/News_Api/js/newsApi.js","src/News_Api/js/classNewsApi.js"],"sourcesContent":["import NewsApi from './classNewsApi';\n\nconst newsGallery = document.querySelector('.js-newsApi');\nconst form = document.querySelector('.form');\nconst findNewsBtn = document.querySelector('.js-form-btn');\nconst loadMoreNewsBtn = document.querySelector('.js-load-more-news-btn');\n\nfindNewsBtn.textContent = 'Find news';\nconst fetchHotNews = new NewsApi();\n\nform.addEventListener('submit', handleFindNewsBtn);\nloadMoreNewsBtn.addEventListener('click', handleLoadNewsBtn);\n\nloadMoreNewsBtn.hidden = true;\n\nfunction markupNews(arr) {\n  return arr\n    .map(({ title, author, publishedAt, urlToImage, description, url }) => {\n      return `\n      <li class=\"news-card\">\n        <div class=\"news-image\">\n          <img\n            src=\"${urlToImage}\"\n            alt=\"${title}\"\n          />\n        </div>\n        <div class=\"news-details\">\n          <h2 class=\"news-title\">${title}</h2>\n          <p class=\"news-author\">${author}</p>\n          <p class=\"news-publishedAt\">Published at: ${dateFix(publishedAt)}</p>\n          <p class=\"news-description\">${description}</p>\n          <a\n            href=\"${url}\"\n            class=\"news-url\"\n            >Read more</a\n          >\n        </div>\n      </li>\n        `;\n    })\n    .join('');\n}\n\nfunction handleFindNewsBtn(e) {\n  e.preventDefault();\n\n  const searchNewsQuery = e.currentTarget.elements.query.value.trim();\n\n  if (!searchNewsQuery) {\n    alert('Bad request!');\n    return;\n  }\n\n  fetchHotNews.searchQuery = searchNewsQuery;\n  fetchHotNews.resetPage();\n  clearNewsContainer();\n\n  loadMoreNewsBtn.hidden = true;\n\n  handleLoadNewsBtn();\n}\n\nasync function handleLoadNewsBtn() {\n  try {\n    findNewsBtn.disabled = true;\n\n    const news = await fetchHotNews.fetchNews();\n\n    const { articles, totalResults } = news;\n\n    if (totalResults > articles.length) {\n      loadMoreNewsBtn.hidden = false;\n    }\n    if (!totalResults) {\n      loadMoreNewsBtn.hidden = true;\n\n      alert(\"Can't find such news\");\n      throw new Error('bad request');\n    }\n\n    loadMoreNewsBtn.disable = true;\n    loadMoreNewsBtn.textContent = 'LOADING>>>';\n\n    newsGallery.insertAdjacentHTML('beforeend', markupNews(articles));\n\n    loadMoreNewsBtn.disable = false;\n    loadMoreNewsBtn.textContent = 'Load more';\n    findNewsBtn.disabled = false;\n  } catch (error) {\n    loadMoreNewsBtn.hidden = true;\n    console.error(error);\n    findNewsBtn.disabled = false;\n  }\n}\n\nfunction clearNewsContainer() {\n  newsGallery.innerHTML = '';\n}\n\nfunction dateFix(incomingDate) {\n  const dateString = incomingDate;\n  const date = new Date(dateString);\n\n  // Отримання різних компонентів дати (день, місяць, рік, година, хвилина)\n  const year = date.getFullYear();\n  const month = ('0' + (date.getMonth() + 1)).slice(-2); // Додаємо 1 до місяця, оскільки місяці в Date починаються з 0\n  const day = ('0' + date.getDate()).slice(-2);\n  const hours = ('0' + date.getHours()).slice(-2);\n  const minutes = ('0' + date.getMinutes()).slice(-2);\n\n  // Форматування дати у потрібний вам формат ('YYYY-MM-DD HH:mm')\n  const formattedDate = `${year}-${month}-${day} ${hours}:${minutes}`;\n\n  return formattedDate;\n}\n","// NewsApi key 51dbc0fa52b2439d86cda18bc3a4c116\n\nexport default class NewsApi {\n  constructor() {\n    this.query = '';\n    this.page = 1;\n    this.BASE_URL = 'https://newsapi.org/v2/everything';\n    this.apiKey = '51dbc0fa52b2439d86cda18bc3a4c116';\n    this.country = 'ua';\n    this.category = 'general';\n    this.pageSize = 24;\n  }\n\n  async fetchNews() {\n    const now = new Date(); // Поточна дата і час\n    const yesterday = new Date(now);\n    yesterday.setDate(now.getDate() - 1);\n\n    const formattedYesterday = yesterday.toISOString().slice(0, 10);\n    const formattedToday = now.toISOString().slice(0, 10);\n\n    const params = new URLSearchParams({\n      from: formattedYesterday,\n      to: formattedToday,\n      sortBy: 'popularity',\n      pageSize: this.pageSize,\n      q: this.query,\n      page: this.page,\n    });\n\n    const url = `${this.BASE_URL}?${params.toString()}`;\n\n    const headers = {\n      'X-Api-Key': this.apiKey,\n    };\n\n    const response = await fetch(url, { headers });\n\n    if (!response.ok) {\n      throw new Error('Error!');\n    }\n\n    const responseData = await response.json();\n    this.page += 1;\n    return responseData;\n  }\n\n  get searchQuery() {\n    return this.query;\n  }\n\n  set searchQuery(newQuery) {\n    this.query = newQuery;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n}\n"],"names":["$aff355a3047dc159$var$newsGallery","document","querySelector","$aff355a3047dc159$var$form","$aff355a3047dc159$var$findNewsBtn","$aff355a3047dc159$var$loadMoreNewsBtn","textContent","$aff355a3047dc159$var$fetchHotNews","async","now","Date","yesterday","setDate","getDate","formattedYesterday","toISOString","slice","formattedToday","params","URLSearchParams","from","to","sortBy","pageSize","this","q","query","page","url","BASE_URL","toString","headers","apiKey","response","fetch","ok","Error","responseData","json","searchQuery","newQuery","resetPage","constructor","country","category","$aff355a3047dc159$var$markupNews","arr","map","title","author","publishedAt","urlToImage","description","incomingDate","date","year","getFullYear","month","getMonth","day","hours","getHours","minutes","getMinutes","$aff355a3047dc159$var$dateFix","join","$aff355a3047dc159$var$handleLoadNewsBtn","disabled","news","fetchNews","articles","totalResults","length","hidden","alert","disable","insertAdjacentHTML","error","console","addEventListener","e","preventDefault","searchNewsQuery","currentTarget","elements","value","trim","innerHTML"],"version":3,"file":"index.7b883689.js.map"}