const e=document.querySelector(".js-newsApi"),t=document.querySelector(".form"),n=document.querySelector(".js-form-btn"),s=document.querySelector(".js-load-more-news-btn");n.textContent="Find news";const r=new class{async fetchNews(){const e=new Date,t=new Date(e);t.setDate(e.getDate()-1);const n=t.toISOString().slice(0,10),s=e.toISOString().slice(0,10),r=new URLSearchParams({from:n,to:s,sortBy:"popularity",pageSize:this.pageSize,q:this.query,page:this.page}),i=`${this.BASE_URL}?${r.toString()}`,a={"X-Api-Key":this.apiKey},c=await fetch(i,{headers:a});if(!c.ok)throw new Error("Error!");const o=await c.json();return this.page+=1,o}get searchQuery(){return this.query}set searchQuery(e){this.query=e}resetPage(){this.page=1}constructor(){this.query="",this.page=1,this.BASE_URL="https://newsapi.org/v2/everything",this.apiKey="51dbc0fa52b2439d86cda18bc3a4c116",this.country="ua",this.category="general",this.pageSize=24}};function i(e){return e.map((({title:e,author:t,publishedAt:n,urlToImage:s,description:r,url:i})=>`\n      <li class="news-card">\n        <div class="news-image">\n          <img\n            src="${s}"\n            alt="${e}"\n          />\n        </div>\n        <div class="news-details">\n          <h2 class="news-title">${e}</h2>\n          <p class="news-author">${t}</p>\n          <p class="news-publishedAt">Published at: ${function(e){const t=new Date(e),n=t.getFullYear(),s=("0"+(t.getMonth()+1)).slice(-2),r=("0"+t.getDate()).slice(-2),i=("0"+t.getHours()).slice(-2),a=("0"+t.getMinutes()).slice(-2);return`${n}-${s}-${r} ${i}:${a}`}(n)}</p>\n          <p class="news-description">${r}</p>\n          <a\n            href="${i}"\n            class="news-url"\n            >Read more</a\n          >\n        </div>\n      </li>\n        `)).join("")}async function a(){try{n.disabled=!0;const t=await r.fetchNews(),{articles:a,totalResults:c}=t;if(c>a.length&&(s.hidden=!1),!c)throw s.hidden=!0,alert("Can't find such news"),new Error("bad request");s.disable=!0,s.textContent="LOADING>>>",e.insertAdjacentHTML("beforeend",i(a)),s.disable=!1,s.textContent="Load more",n.disabled=!1}catch(e){s.hidden=!0,console.error(e),n.disabled=!1}}t.addEventListener("submit",(function(t){t.preventDefault();const n=t.currentTarget.elements.query.value.trim();if(!n)return void alert("Bad request!");r.searchQuery=n,r.resetPage(),e.innerHTML="",s.hidden=!0,a()})),s.addEventListener("click",a),s.hidden=!0;
//# sourceMappingURL=index.7b883689.js.map
