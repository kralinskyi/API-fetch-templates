!function(){function e(e){return e&&e.__esModule?e.default:e}var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var n={};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){t&&r(e.prototype,t);n&&r(e,n);return e};var a=function(){"use strict";function r(){e(t)(this,r),this.searchQuery="",this.page=1,this.per_page=12,this.image_type="photo"}return e(n)(r,[{key:"fetchPhotos",value:function(){var e=this,t=new URLSearchParams({key:"34842285-9ef26a99ee49cc306160c27d8",q:this.searchQuery,image_type:this.image_type,per_page:this.per_page,page:this.page});return fetch("".concat("https://pixabay.com/api/","?").concat(t)).then((function(e){return e.json()})).then((function(t){var n=t.hits,r=t.total;return e.incrementPage(),{hits:n,total:r}}))}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}}]),r}(),o=document.querySelector(".form"),i=document.querySelector(".photos"),c=document.querySelector(".load-more-btn"),u=document.querySelector(".js-form-btn"),s=(document.querySelector(".form-input"),new a);function l(){u.disabled=!0,s.fetchPhotos().then((function(e){var t=e.hits,n=e.total;if(!t.length)throw c.hidden=!0,alert("Can't find such photos"),new Error("bad request");(n<=t.length||t.length*s.page>=n||0===n)&&(c.hidden=!0),c.disable=!0,c.textContent="LOADING>>>",i.insertAdjacentHTML("beforeend",t.map((function(e){var t=e.largeImageURL,n=e.tags;return'<li class="photo-item">\n        <img src="'.concat(t,'" alt="').concat(n,'" />\n        <p>').concat(n,"</p>\n        </li>")})).join("")),c.disable=!1,c.textContent="Load more",u.disabled=!1})).catch((function(e){c.hidden=!0,console.error(e),u.disabled=!1}))}c.hidden=!0,o.addEventListener("submit",(function(e){e.preventDefault();var t=e.target.elements.query.value;if(!t.trim())return;s.query=t.trim(),s.resetPage(),i.innerHTML="",l()})),c.addEventListener("click",l)}();
//# sourceMappingURL=index.3a38c968.js.map
