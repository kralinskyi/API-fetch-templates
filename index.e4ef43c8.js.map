{"mappings":"AAEA,MAAMA,EAASC,SAASC,cAAc,SAChCC,EAAeF,SAASC,cAAc,WACtCE,EAAcH,SAASC,cAAc,kBACrCG,EAAgBJ,SAASC,cAAc,gBAGvCI,GAFUL,SAASC,cAAc,eAEpB,ICRJ,MAQbK,cACE,MAGMC,EAAS,IAAIC,gBAAgB,CACjCC,IAHc,qCAIdC,EAAGC,KAAKC,YACRC,WAAYF,KAAKE,WACjBC,SAAUH,KAAKG,SACfC,KAAMJ,KAAKI,OAGb,OAAOC,MAAM,4BAAeT,KACzBU,MAAKC,GAAYA,EAASC,SAC1BF,MAAK,EAACG,KAAEA,EAAIC,MAAEA,MACbV,KAAKW,gBACE,C,KAAEF,E,MAAMC,K,CAIjBE,YACF,OAAOZ,KAAKC,W,CAEVW,UAAMC,GACRb,KAAKC,YAAcY,C,CAGrBF,gBACEX,KAAKI,MAAQ,C,CAGfU,YACEd,KAAKI,KAAO,C,CAvCdW,cACEf,KAAKC,YAAc,GACnBD,KAAKI,KAAO,EACZJ,KAAKG,SAAW,GAChBH,KAAKE,WAAa,O,IDkCtB,SAASc,IACPvB,EAAcwB,UAAW,EAIFvB,EACpBC,cACAW,MAAK,EAACG,KAAEA,EAAIC,MAAEA,MACb,IAAKD,EAAKS,OAIR,MAHA1B,EAAY2B,QAAS,EAErBC,MAAM,0BACA,IAAIC,MAAM,gBAKhBX,GAASD,EAAKS,QACdT,EAAKS,OAASxB,EAAWU,MAAQM,GACvB,IAAVA,KAEAlB,EAAY2B,QAAS,GAGvB3B,EAAY8B,SAAU,EACtB9B,EAAY+B,YAAc,aAE1BhC,EAAaiC,mBAAmB,YAAyBf,EApC1DgB,KAAI,EAACC,cAAEA,EAAaC,KAAEA,KACd,8CACOD,WAAuBC,qBAC9BA,yBAGRC,KAAK,KAgCJpC,EAAY8B,SAAU,EACtB9B,EAAY+B,YAAc,YAC1B9B,EAAcwB,UAAW,CAAK,IAE/BY,OAAMC,IACLtC,EAAY2B,QAAS,EACrBY,QAAQD,MAAMA,GACdrC,EAAcwB,UAAW,CAAK,G,CAlEpCzB,EAAY2B,QAAS,EAErB/B,EAAO4C,iBAAiB,UAGxB,SAA2BC,GACzBA,EAAEC,iBAEF,MAAMjC,EAAcgC,EAAEE,OAAOC,SAASxB,MAAMyB,MAE5C,IAAKpC,EAAYqC,OAAQ,OACzB5C,EAAWkB,MAAQX,EAAYqC,OAEF5C,EAAlBoB,YA0DXvB,EAAagD,UAAY,GAvDQvB,G,IAbnCxB,EAAYwC,iBAAiB,QAAShB","sources":["src/js/pixabeyApi.js","src/js/classApiPixabey.js"],"sourcesContent":["import ApiPixabey from './classApiPixabey';\n\nconst formEl = document.querySelector('.form');\nconst photosListEl = document.querySelector('.photos');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst findPhotosBtn = document.querySelector('.js-form-btn');\nconst inputEl = document.querySelector('.form-input');\n\nconst apiPixabey = new ApiPixabey();\nloadMoreBtn.hidden = true;\n\nformEl.addEventListener('submit', onFindPhotosClick);\nloadMoreBtn.addEventListener('click', fetchPhotosFunction);\n\nfunction onFindPhotosClick(e) {\n  e.preventDefault();\n\n  const searchQuery = e.target.elements.query.value;\n\n  if (!searchQuery.trim()) return;\n  apiPixabey.query = searchQuery.trim(); // записуємо в екз. класу query без пробілів\n\n  apiPixabey.resetPage(); // При submit завжди починаємо з першої сторінки\n  clearPhotosContainer(); //Очищуємо попередні результати запиту\n\n  fetchPhotosFunction(); // fetch query\n}\n\nfunction markupFetch(arr) {\n  return arr\n    .map(({ largeImageURL, tags }) => {\n      return `<li class=\"photo-item\">\n        <img src=\"${largeImageURL}\" alt=\"${tags}\" />\n        <p>${tags}</p>\n        </li>`;\n    })\n    .join('');\n}\n\nfunction fetchPhotosFunction() {\n  findPhotosBtn.disabled = true;\n\n  // Як приклад  + спінер потрібно\n\n  apiPixabey\n    .fetchPhotos()\n    .then(({ hits, total }) => {\n      if (!hits.length) {\n        loadMoreBtn.hidden = true;\n\n        alert(\"Can't find such photos\");\n        throw new Error('bad request');\n      }\n\n      // Перевірка, чи потрібна кнопка LOAD MORE\n      if (\n        total <= hits.length ||\n        hits.length * apiPixabey.page >= total ||\n        total === 0\n      ) {\n        loadMoreBtn.hidden = true;\n      }\n\n      loadMoreBtn.disable = true;\n      loadMoreBtn.textContent = 'LOADING>>>'; // loader краще\n\n      photosListEl.insertAdjacentHTML('beforeend', markupFetch(hits));\n\n      loadMoreBtn.disable = false;\n      loadMoreBtn.textContent = 'Load more';\n      findPhotosBtn.disabled = false;\n    })\n    .catch(error => {\n      loadMoreBtn.hidden = true;\n      console.error(error);\n      findPhotosBtn.disabled = false;\n    });\n}\n\nfunction clearPhotosContainer() {\n  photosListEl.innerHTML = '';\n}\n","export default class ApiPixabay {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    this.per_page = 12;\n    this.image_type = 'photo';\n  }\n\n  fetchPhotos() {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '34842285-9ef26a99ee49cc306160c27d8';\n\n    const params = new URLSearchParams({\n      key: API_KEY,\n      q: this.searchQuery,\n      image_type: this.image_type,\n      per_page: this.per_page,\n      page: this.page,\n    });\n\n    return fetch(`${BASE_URL}?${params}`)\n      .then(response => response.json())\n      .then(({ hits, total }) => {\n        this.incrementPage();\n        return { hits, total };\n      });\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n}\n"],"names":["$97b2d825b115b79c$var$formEl","document","querySelector","$97b2d825b115b79c$var$photosListEl","$97b2d825b115b79c$var$loadMoreBtn","$97b2d825b115b79c$var$findPhotosBtn","$97b2d825b115b79c$var$apiPixabey","fetchPhotos","params","URLSearchParams","key","q","this","searchQuery","image_type","per_page","page","fetch","then","response","json","hits","total","incrementPage","query","newQuery","resetPage","constructor","$97b2d825b115b79c$var$fetchPhotosFunction","disabled","length","hidden","alert","Error","disable","textContent","insertAdjacentHTML","map","largeImageURL","tags","join","catch","error","console","addEventListener","e","preventDefault","target","elements","value","trim","innerHTML"],"version":3,"file":"index.e4ef43c8.js.map"}